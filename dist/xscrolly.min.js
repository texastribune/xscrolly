/* xscrolly - v0.4.0 - 2014-04-21 */
window.XScrollY=function(a,b){"use strict";function c(c){var e=this;this._seen=[],this.options=a.extend({},d,c||{}),this.$scrollElement=a(this.options.container),this.$active=a(),this.updateTargets(),this.updateOffsets(),this.$scrollElement.on("scroll.xscrolly",b.throttle(function(){e.process.call(e)},this.options.throttle)),this.process(),this.options.start&&this.options.start.call(this,this.$active)}var d={container:window,targets:"section",updateOffsets:0,offset:0,throttle:200};return c.prototype.updateTargets=function(){this.$targets=a(this.options.targets)},c.prototype._updateOffsets=function(b,c,d){b.each(function(b,e){var f=a(e).position().top;d[f]||(d[f]=[]),c.push(f),d[f].push(e)}),c=c.sort(function(a,b){return a-b})},c.prototype.updateOffsets=function(){this.offsets=[],this.offsetMap={},this._updateOffsets(this.$targets,this.offsets,this.offsetMap)},c.prototype.update=function(){this.updateTargets(),this.updateOffsets()},c.prototype.getActiveOffset=function(){for(var a=this.$scrollElement.scrollTop()+this.options.offset,b=0,c=this.offsets.length;c>b;++b)if(a<this.offsets[b])return this.offsets[Math.max(0,b-1)];return this.offsets[c-1]},c.prototype.getActive=function(){var b=this.getActiveOffset();return this.activeOffset=b,a(this.offsetMap[b])},c.prototype.process=function(){3===this.options.updateOffsets&&this.updateOffsets();var a=this.activeOffset,b=this.getActive();this.activeOffset!=a&&this.change(b),this.options.scroll&&this.options.scroll.call(this,b),this.$active=b},c.prototype.change=function(a){2===this.options.updateOffsets&&this.updateOffsets(),-1==b.indexOf(this._seen,a[0])&&(this._seen.push(a[0]),this.unveil(a)),this.options.change&&this.options.change.call(this,a)},c.prototype.unveil=function(a){1===this.options.updateOffsets&&this.updateOffsets(),this.options.unveil&&this.options.unveil.call(this,a)},c.prototype.disable=function(){this.$scrollElement.off(".xscrolly")},c.prototype.enable=function(){},c.prototype.slice=function(b,c,d){var e=this.offsets,f=this.offsetMap;d&&(e=[],f={},this._updateOffsets(d,e,f));for(var g,h=0,i=e.length,j=a();i>h;++h)g=e[h],g>=b&&c>g&&(j=j.add(f[g]));return j},c.prototype.visible=function(a,b,c){"object"==typeof a&&a.jquery?(c=a,a=0,b=0):(a=a||0,b=b||0);var d=this.$scrollElement.scrollTop(),e=d+this.$scrollElement.height();return this.slice(d+this.options.offset+a-b,e+this.options.offset+a+b,c)},c.prototype.above=function(a,b,c){"object"==typeof a&&a.jquery?(c=a,a=0,b=0):(a=a||0,b=b||0);var d=this.$scrollElement.scrollTop();return this.slice(0,d+this.options.offset+a+b,c)},c.prototype.aboves=function(a,b,c){"object"==typeof a&&a.jquery?(c=a,a=0,b=0):(a=a||0,b=b||0);var d=this.$scrollElement.scrollTop(),e=d+this.$scrollElement.height();return this.slice(0,e+this.options.offset+a+b,c)},c.prototype.below=function(a,b,c){"object"==typeof a&&a.jquery?(c=a,a=0,b=0):(a=a||0,b=b||0);var d=this.$scrollElement.scrollTop();return this.slice(d+this.options.offset+a-b,1/0,c)},c.prototype.belows=function(a,b,c){"object"==typeof a&&a.jquery?(c=a,a=0,b=0):(a=a||0,b=b||0);var d=this.$scrollElement.scrollTop(),e=d+this.$scrollElement.height();return this.slice(e+this.options.offset+a-b,1/0,c)},c.prototype.option=function(b,c){"object"==typeof b&&"undefined"==typeof c?a.extend(this.options,b):this.options[b]=c},c}(window.jQuery,window._);