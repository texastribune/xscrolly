/* xscrolly - v0.1.0 - 2013-07-03 */
function XScrollY(a){var b=this;this._seen=[],this.options=$.extend({},defaultOptions,a||{}),this.$scrollElement=$(window),this.$targets=$(this.options.targets),this.offsets=this.$targets.map(function(){return $(this).position().top}),this.$scrollElement.on("scroll.xscrolly",_.throttle(function(){b.process.call(b)},this.options.throttle)),this.process()}var defaultOptions={alwaysRefresh:!1,offset:0,targets:"section",throttle:200};XScrollY.prototype.refresh=function(){this.offsets=this.$targets.map(function(){return $(this).position().top})},XScrollY.prototype.getActive=function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=1,c=this.offsets.length;if(a<this.offsets[0])return this.$targets.eq(0);for(;c>b;++b)if(a<this.offsets[b])return this.$targets.eq(b-1);return this.$targets.eq(c-1)},XScrollY.prototype.process=function(){this.options.alwaysRefresh&&this.refresh();var a=this.getActive();this.active!=a[0]&&(this.change(a),this.active=a[0])},XScrollY.prototype.change=function(a){-1==_.indexOf(this._seen,a[0])&&(this._seen.push(a[0]),this.one(a)),this.options.change&&this.options.change.call(this,a)},XScrollY.prototype.one=function(a){this.options.one&&this.options.one.call(this,a)},XScrollY.prototype.disable=function(){this.$scrollElement.off(".xscrolly")},XScrollY.prototype.enable=function(){},XScrollY.prototype.slice=function(a,b){for(var c,d=0,e=this.offsets.length,f=$();e>d;++d)c=this.offsets[d],c>a&&b>c&&(f=f.add(this.$targets[d]));return f},XScrollY.prototype.visible=function(a,b){a=a||0,b=b||0;var c=this.$scrollElement.scrollTop(),d=c+this.$scrollElement.height();return this.slice(c+this.options.offset+a-b,d+this.options.offset+a+b)},XScrollY.prototype.above=function(a,b){a=a||0,b=b||0;var c=this.$scrollElement.scrollTop();return this.slice(0,c+this.options.offset+a+b)},XScrollY.prototype.below=function(a,b){a=a||0,b=b||0;var c=this.$scrollElement.scrollTop();return this.slice(c+this.options.offset+a-b,1/0)},XScrollY.prototype.option=function(a,b){"object"==typeof a&&"undefined"==typeof b?$.extend(this.options,a):this.options[a]=b},$.fn.xscrolly=function(a,b,c){return"option"===a?this.data("xscrolly").option(b,c):(a.targets=this,this.data("xscrolly",new XScrollY(a))),this};